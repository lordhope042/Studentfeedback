<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Submissions â€“ HAFEDPOLY</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
*{box-sizing:border-box;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;margin:0;padding:0;}
body{min-height:100vh;background:#007bff;color:#333;position:relative;overflow-x:hidden;}
canvas#bgCanvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}

header{display:flex;justify-content:space-between;align-items:center;padding:16px;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.1);z-index:1000;position:sticky;top:0;}
header h1{margin:0;color:#007bff;}
.hamburger{width:28px;height:20px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer;}
.hamburger span{display:block;height:3px;background:#007bff;border-radius:2px;transition:.3s;}
.hamburger.active span:nth-child(1){transform:translateY(8.5px) rotate(45deg);}
.hamburger.active span:nth-child(2){opacity:0;}
.hamburger.active span:nth-child(3){transform:translateY(-8.5px) rotate(-45deg);}

nav{position:fixed;top:0;right:-250px;width:220px;height:100%;background:#fff;box-shadow:-2px 0 10px rgba(0,0,0,.15);padding:20px;transition:.3s;z-index:999;}
nav.active{right:0;}
nav a{display:block;margin:14px 0;color:#007bff;text-decoration:none;font-weight:600;}

.container{padding:20px;max-width:1000px;margin:20px auto;background:rgba(255,255,255,0.95);border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.15);}
.table-wrapper{overflow-x:auto;margin-top:15px;}
table{width:100%;border-collapse:collapse;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,.1);}
th,td{padding:12px;text-align:left;border-bottom:1px solid #ddd;}
th{background:#007bff;color:#fff;}
td[colspan="6"]{text-align:center;color:#666;font-style:italic;}

/* Status Badges */
.status{font-weight:600;padding:4px 10px;border-radius:12px;display:inline-block;}
.status.Pending{background:#dc3545;color:#fff;}
.status.Verified{background:#ffc107;color:#000;}
.status.Resolved{background:#28a745;color:#fff;}
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<header>
  <h1>My Submissions</h1>
  <div class="hamburger" id="hamburger"><span></span><span></span><span></span></div>
</header>

<nav id="nav">
  <a href="student-dashboard.html">Dashboard</a>
  <a href="submit-complaint.html">Submit Complaint</a>
  <a href="submit-suggestion.html">Submit Suggestion</a>
  <a href="student-submission.html">My Submissions</a>
  <a href="#" id="logoutLink">Logout</a>
</nav>

<div class="container">
  <h2>Complaints</h2>
  <div class="table-wrapper">
    <table>
      <thead>
        <tr><th>ID</th><th>Category</th><th>Title</th><th>Description</th><th>Status</th><th>Date</th></tr>
      </thead>
      <tbody id="complaintsBody"></tbody>
    </table>
  </div>

  <h2 style="margin-top:30px;">Suggestions</h2>
  <div class="table-wrapper">
    <table>
      <thead>
        <tr><th>ID</th><th>Category</th><th>Title</th><th>Description</th><th>Status</th><th>Date</th></tr>
      </thead>
      <tbody id="suggestionsBody"></tbody>
    </table>
  </div>
</div>

<script>
// --- Particle Network Background ---
const canvas=document.getElementById("bgCanvas");
const ctx=canvas.getContext("2d");
let particles=[];
const particleCount=80;

function resizeCanvas(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
window.addEventListener("resize",resizeCanvas);
resizeCanvas();

function random(min,max){return Math.random()*(max-min)+min;}

class Particle{
  constructor(){
    this.x=random(0,canvas.width);
    this.y=random(0,canvas.height);
    this.radius=random(2,5);
    this.speedX=random(-0.5,0.5);
    this.speedY=random(-0.5,0.5);
  }
  update(){
    this.x+=this.speedX; this.y+=this.speedY;
    if(this.x<0||this.x>canvas.width)this.speedX*=-1;
    if(this.y<0||this.y>canvas.height)this.speedY*=-1;
  }
  draw(){
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);
    ctx.fillStyle="rgba(255,255,255,0.6)";
    ctx.fill();
  }
}
for(let i=0;i<particleCount;i++)particles.push(new Particle());

function animateParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{p.update();p.draw();});
  // Lines between close particles
  for(let i=0;i<particles.length;i++){
    for(let j=i+1;j<particles.length;j++){
      let dx=particles[i].x-particles[j].x;
      let dy=particles[i].y-particles[j].y;
      let dist=Math.sqrt(dx*dx+dy*dy);
      if(dist<120){
        ctx.beginPath();
        ctx.strokeStyle="rgba(255,255,255,"+(1-dist/120)*0.3+")";
        ctx.lineWidth=1;
        ctx.moveTo(particles[i].x,particles[i].y);
        ctx.lineTo(particles[j].x,particles[j].y);
        ctx.stroke();
      }
    }
  }
  requestAnimationFrame(animateParticles);
}
animateParticles();

// --- Helper & Session ---
const $=id=>document.getElementById(id);
const hamburger=$("hamburger"), nav=$("nav");
hamburger.onclick=()=>{hamburger.classList.toggle("active"); nav.classList.toggle("active");};
$("logoutLink").onclick=e=>{e.preventDefault(); localStorage.removeItem("activeStudent"); location.href="login.html";};

const active=JSON.parse(localStorage.getItem("activeStudent")||"null");
if(!active){ alert("Session expired. Please log in."); location.href="login.html"; }

// --- Format Status ---
function formatStatus(status){
  if(status==="Verified") return `<span class="status Verified">In Progress</span>`;
  if(status==="Resolved") return `<span class="status Resolved">Solved</span>`;
  return `<span class="status Pending">Pending</span>`;
}

// --- Load Submissions ---
function loadSubmissions(){
  const complaints=JSON.parse(localStorage.getItem("complaints")||"[]").filter(c=>c.studentId===active.uniqueId||c.studentId===active.id);
  const suggestions=JSON.parse(localStorage.getItem("suggestions")||"[]").filter(s=>s.studentId===active.uniqueId||s.studentId===active.id);

  const compBody=$("complaintsBody"); compBody.innerHTML="";
  if(complaints.length===0) compBody.innerHTML="<tr><td colspan='6'>No complaints submitted.</td></tr>";
  else complaints.forEach(c=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${c.complaintId}</td><td>${c.category}</td><td>${c.title}</td><td>${c.desc}</td>
      <td>${formatStatus(c.status)}</td><td>${new Date(c.date).toLocaleString()}</td>`;
    compBody.appendChild(tr);
  });

  const sugBody=$("suggestionsBody"); sugBody.innerHTML="";
  if(suggestions.length===0) sugBody.innerHTML="<tr><td colspan='6'>No suggestions submitted.</td></tr>";
  else suggestions.forEach(s=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`<td>${s.suggestionId}</td><td>${s.category}</td><td>${s.title}</td><td>${s.desc}</td>
      <td>${formatStatus(s.status)}</td><td>${new Date(s.date).toLocaleString()}</td>`;
    sugBody.appendChild(tr);
  });
}
loadSubmissions();
</script>
<!-- Add inside <body> after your container -->
<div class="fab-container">
  <button class="fab" id="newComplaintBtn" title="Submit Complaint">+</button>
  <button class="fab" id="newSuggestionBtn" title="Submit Suggestion">&#9998;</button>
</div>

<style>
.fab-container{position:fixed;bottom:30px;right:30px;display:flex;flex-direction:column;gap:15px;z-index:1000;}
.fab{width:60px;height:60px;border-radius:50%;border:none;background:#28a745;color:#fff;font-size:28px;cursor:pointer;box-shadow:0 6px 20px rgba(0,0,0,.25);transition:.3s;}
.fab:hover{background:#218838;transform:scale(1.1);}
</style>

<script>
// Floating Action Buttons
$("newComplaintBtn").onclick = () => location.href="submit-complaint.html";
$("newSuggestionBtn").onclick = () => location.href="submit-suggestion.html";
</script>
</body>
</html>